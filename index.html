<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Pedido de Namoro üíñ</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #87CEEB;
        font-family: Arial;
    }

    canvas {
        display: block;
    }

    /* BOT√ïES DE CONTROLE (CELULAR) */
    .controls {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 20px;
        z-index: 10;
    }

    .btn {
        width: 70px;
        height: 70px;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 30px;
        user-select: none;
        touch-action: manipulation;
        box-shadow: 0 0 10px #0004;
    }

    .btn:active {
        background: white;
    }
</style>
</head>
<body>

<canvas id="game"></canvas>

<!-- CONTROLES PARA CELULAR -->
<div class="controls">
    <div class="btn" id="left">‚¨ÖÔ∏è</div>
    <div class="btn" id="jump">‚¨ÜÔ∏è</div>
    <div class="btn" id="right">‚û°Ô∏è</div>
</div>

<script>
// CONFIG CANVAS
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

// PERSONAGEM
const player = {
    x: 80,
    y: 0,
    w: 40,
    h: 40,
    velX: 0,
    velY: 0,
    speed: 4,
    jumping: false
};

// F√çSICA
const gravity = 0.6;
const friction = 0.8;

// PLATAFORMAS
const platforms = [
    { x: 0, y: canvas.height - 50, w: canvas.width, h: 50 },
    { x: 200, y: canvas.height - 150, w: 150, h: 20 },
    { x: 450, y: canvas.height - 280, w: 150, h: 20 },
    { x: 750, y: canvas.height - 200, w: 150, h: 20 }
];

// CORA√á√ÉO FINAL
const heart = { x: 800, y: canvas.height - 240, w: 40, h: 40 };

// INPUT (TECLADO)
const keys = {};

document.addEventListener("keydown", (e) => (keys[e.code] = true));
document.addEventListener("keyup", (e) => (keys[e.code] = false));


// INPUT (TOUCH / BOT√ïES)
// movimento cont√≠nuo no celular
let leftPressed = false;
let rightPressed = false;

document.getElementById("left").addEventListener("touchstart", () => leftPressed = true);
document.getElementById("left").addEventListener("touchend", () => leftPressed = false);

document.getElementById("right").addEventListener("touchstart", () => rightPressed = true);
document.getElementById("right").addEventListener("touchend", () => rightPressed = false);

document.getElementById("jump").addEventListener("touchstart", () => {
    if (!player.jumping) {
        player.velY = -12;
        player.jumping = true;
    }
});


// LOOP DO JOGO
function gameLoop() {

    // MOVIMENTO (PC)
    if (keys["ArrowRight"]) player.velX = player.speed;
    else if (keys["ArrowLeft"]) player.velX = -player.speed;

    // MOVIMENTO (CELULAR)
    if (rightPressed) player.velX = player.speed;
    if (leftPressed) player.velX = -player.speed;

    // ATRITO
    if (!keys["ArrowRight"] && !keys["ArrowLeft"] && !leftPressed && !rightPressed) {
        player.velX *= friction;
    }

    // GRAVIDADE
    player.velY += gravity;

    // APLICAR MOVIMENTO
    player.x += player.velX;
    player.y += player.velY;

    // COLIS√ïES COM PLATAFORMAS
    platforms.forEach((p) => {
        if (
            player.x < p.x + p.w &&
            player.x + player.w > p.x &&
            player.y + player.h > p.y &&
            player.y + player.h < p.y + p.h + player.velY
        ) {
            player.y = p.y - player.h;
            player.velY = 0;
            player.jumping = false;
        }
    });

    // CHEGOU NO CORA√á√ÉO
    if (
        player.x < heart.x + heart.w &&
        player.x + player.w > heart.x &&
        player.y < heart.y + heart.h &&
        player.y + player.h > heart.y
    ) {
        alert("üíñ Voc√™ chegou ao cora√ß√£o! Quer namorar comigo?");
        window.location.reload();
    }

    // DESENHAR TELA
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // plataformas
    ctx.fillStyle = "#654321";
    platforms.forEach((p) => ctx.fillRect(p.x, p.y, p.w, p.h));

    // cora√ß√£o
    ctx.font = "40px Arial";
    ctx.fillText("‚ù§Ô∏è", heart.x, heart.y);

    // player
    ctx.fillStyle = "red";
    ctx.fillRect(player.x, player.y, player.w, player.h);

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
