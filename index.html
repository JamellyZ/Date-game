<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Pedido de Namoro üíñ</title>
<style>
    body {
        margin: 0;
        background: #87CEEB;
        overflow: hidden;
        touch-action: none;
        font-family: Arial;
    }

    canvas {
        display: block;
    }

    /* CONTROLES MOBILE */
    .controls {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 30px;
        z-index: 10;
    }

    .btn {
        width: 80px;
        height: 80px;
        background: rgba(255,255,255,0.25);
        border: 2px solid rgba(255,255,255,0.6);
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 36px;
        backdrop-filter: blur(6px);
        user-select: none;
        touch-action: manipulation;
    }

    .btn:active {
        background: rgba(255,255,255,0.5);
    }

</style>
</head>
<body>

<canvas id="game"></canvas>

<!-- CONTROLES -->
<div class="controls">
    <div class="btn" id="left">‚¨ÖÔ∏è</div>
    <div class="btn" id="jump">‚¨ÜÔ∏è</div>
    <div class="btn" id="right">‚û°Ô∏è</div>
</div>

<script>
// CONFIGURA√á√ÉO DO CANVAS
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

// MUNDO
let cameraX = 0;
const worldWidth = 2000;

// PLAYER (sprite simples bonito)
const player = {
    x: 80,
    y: 0,
    w: 45,
    h: 45,
    velX: 0,
    velY: 0,
    speed: 4,
    jumping: false
};

const gravity = 0.6;
const friction = 0.8;

// PLATAFORMAS (com v√°rias para o mapa ficar bonito)
const platforms = [
    { x: 0, y: canvas.height - 60, w: worldWidth, h: 60 },
    { x: 250, y: canvas.height - 150, w: 180, h: 20 },
    { x: 550, y: canvas.height - 270, w: 180, h: 20 },
    { x: 900, y: canvas.height - 190, w: 180, h: 20 },
    { x: 1250, y: canvas.height - 260, w: 180, h: 20 },
    { x: 1600, y: canvas.height - 190, w: 180, h: 20 },
];

// HEART FINAL (com brilho)
const heart = { 
    x: 1680, 
    y: canvas.height - 240, 
    w: 50, 
    h: 50,
    pulse: 0
};

// INPUT ‚Äî teclado
const keys = {};
document.addEventListener("keydown", e => keys[e.code] = true);
document.addEventListener("keyup", e => keys[e.code] = false);

// INPUT ‚Äî mobile
let leftPressed = false;
let rightPressed = false;

const btnLeft = document.getElementById("left");
const btnRight = document.getElementById("right");
const btnJump = document.getElementById("jump");

btnLeft.addEventListener("touchstart", () => leftPressed = true);
btnLeft.addEventListener("touchend", () => leftPressed = false);

btnRight.addEventListener("touchstart", () => rightPressed = true);
btnRight.addEventListener("touchend", () => rightPressed = false);

btnJump.addEventListener("touchstart", () => {
    if (!player.jumping) {
        player.velY = -13;
        player.jumping = true;
    }
});

// FUN√á√ÉO PARA CHUVA DE CORA√á√ïES
function rainHearts() {
    for (let i = 0; i < 30; i++) {
        setTimeout(() => {
            const x = cameraX + Math.random() * canvas.width;
            const y = -50;
            const fallSpeed = 3 + Math.random() * 4;

            const drop = { x, y, fallSpeed };

            function fall() {
                drop.y += drop.fallSpeed;
                ctx.font = "40px Arial";
                ctx.fillText("üíñ", drop.x - cameraX, drop.y);

                if (drop.y < canvas.height + 50)
                    requestAnimationFrame(fall);
            }

            fall();
        }, i * 100);
    }
}

// LOOP PRINCIPAL
function gameLoop() {

    // MOVIMENTO
    if (keys["ArrowRight"] || rightPressed) player.velX = player.speed;
    else if (keys["ArrowLeft"] || leftPressed) player.velX = -player.speed;
    else player.velX *= friction;

    // GRAVIDADE
    player.velY += gravity;

    // APLICA MOVIMENTO
    player.x += player.velX;
    player.y += player.velY;

    // COLIS√ïES
    platforms.forEach(p => {
        if (
            player.x < p.x + p.w &&
            player.x + player.w > p.x &&
            player.y + player.h > p.y &&
            player.y + player.h < p.y + player.h
        ) {
            player.y = p.y - player.h;
            player.velY = 0;
            player.jumping = false;
        }
    });

    // CAMERA seguindo o player
    cameraX = player.x - canvas.width / 2;
    if (cameraX < 0) cameraX = 0;
    if (cameraX > worldWidth - canvas.width) cameraX = worldWidth - canvas.width;

    // CHEGOU NO CORA√á√ÉO
    if (
        player.x < heart.x + heart.w &&
        player.x + player.w > heart.x &&
        player.y < heart.y + heart.h &&
        player.y + player.h > heart.y
    ) {
        rainHearts();
        setTimeout(() => {
            alert("üíñ Voc√™ encontrou meu cora√ß√£o... quer namorar comigo?");
        }, 600);
        return;
    }

    // DESENHO DA TELA
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // C√âU
    ctx.fillStyle = "#87CEEB";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // PLATAFORMAS ESTILIZADAS
    ctx.fillStyle = "#654321";
    platforms.forEach(p => {
        ctx.fillRect(p.x - cameraX, p.y, p.w, p.h);

        // Graminha
        ctx.fillStyle = "#4CAF50";
        ctx.fillRect(p.x - cameraX, p.y - 5, p.w, 5);
        ctx.fillStyle = "#654321";
    });

    // PLAYER com sombra
    ctx.fillStyle = "rgba(0,0,0,0.3)";
    ctx.beginPath();
    ctx.ellipse(
        player.x - cameraX + player.w/2,
        player.y + player.h + 10,
        20, 8, 0, 0, Math.PI * 2
    );
    ctx.fill();

    // Player (bolinha fofa)
    ctx.fillStyle = "#ff4f79";
    ctx.beginPath();
    ctx.arc(
        player.x - cameraX + player.w/2,
        player.y + player.h/2,
        player.w/2,
        0, Math.PI * 2
    );
    ctx.fill();

    // CORA√á√ÉO PULSANTE
    heart.pulse += 0.08;
    const size = 40 + Math.sin(heart.pulse) * 6;
    ctx.font = size + "px Arial";
    ctx.fillText("‚ù§Ô∏è", heart.x - cameraX, heart.y);

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
